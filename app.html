<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>BM Pro - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #1f1c2c, #928dab);
    font-family: 'Vazirmatn', sans-serif;
    color: white;
  }
  header {
    padding: 15px;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .points {
    font-weight: bold;
    font-size: 1.2rem;
  }
  main {
    padding: 20px;
  }
  .panel {
    background: rgba(0,0,0,0.5);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
  }
  button.toggle-btn {
    background: #5865F2;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
    margin-bottom: 10px;
  }
  button.toggle-btn:hover {
    transform: scale(1.05);
    background: #4752c4;
  }
  .hidden {
    display: none;
  }
  input[type="text"] {
    padding: 8px;
    border-radius: 6px;
    border: none;
    width: 200px;
    margin-right: 10px;
  }
  .shop-item {
    margin-bottom: 10px;
  }
</style>
</head>
<body>
<header>
  <h2>BM Pro - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h2>
  <div class="points">Ø§Ù…ØªÛŒØ§Ø²: <span id="points">0</span></div>
</header>
<main>

<!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± -->
<div class="panel">
  <button class="toggle-btn" onclick="toggleSection('info')">Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±</button>
  <div id="info" class="hidden">
    <p>Ù†Ø§Ù…: <span id="username">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></p>
    <p>Discord ID: <span id="userid">...</span></p>
  </div>
</div>

<!-- ØªØ³Ú© Ù‡Ø§ -->
<div class="panel">
  <button class="toggle-btn" onclick="toggleSection('tasks')">ØªØ³Ú©â€ŒÙ‡Ø§</button>
  <div id="tasks" class="hidden">
    <button onclick="completeTask('daily')">Ú†Ú© Ú©Ø±Ø¯Ù† Ø±ÙˆØ²Ø§Ù†Ù‡ Ø³Ø§ÛŒØª</button>
    <button onclick="joinDiscordChannel()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú†Ù†Ù„ Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯</button>
    <button onclick="showMobileInput()">Ø«Ø¨Øª Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</button>
    <div id="mobileInput" class="hidden">
      <input type="text" id="mobile" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
      <button onclick="submitMobile()">Ø«Ø¨Øª</button>
      <p id="mobileMsg"></p>
    </div>
  </div>
</div>

<!-- ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
<div class="panel">
  <button class="toggle-btn" onclick="toggleSection('shop')">ÙØ±ÙˆØ´Ú¯Ø§Ù‡</button>
  <div id="shop" class="hidden">
    <div class="shop-item"><button onclick="buyItem('boost', 2000)">Ø¨ÙˆØ³Øª Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯ 1 Ù…Ø§Ù‡Ù‡ (2000 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <div class="shop-item"><button onclick="buyItem('premium', 1400)">Ø§Ø´ØªØ±Ø§Ú© Ù¾Ø±Ù…ÛŒÙˆÙ… Ø³Ø±ÙˆØ±Ù‡Ø§ (1400 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <div class="shop-item"><button onclick="buyItem('vip', 1200)">ÙˆÛŒ Ø§ÛŒ Ù¾ÛŒ + (1200 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <div class="shop-item"><button onclick="buyItem('silver', 900)">Ø§Ø´ØªØ±Ø§Ú© Ù†Ù‚Ø±Ù‡ Ø§ÛŒ (900 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <div class="shop-item"><button onclick="buyItem('bronze', 590)">Ø§Ø´ØªØ±Ø§Ú© Ø¨Ø±Ù†Ø² (590 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <div class="shop-item"><button onclick="buyItem('minecraft', 30000)">Ø®Ø±ÛŒØ¯ Ø³Ø±ÙˆØ± Ù…Ø§ÛŒÙ†Ú©Ø±Ø§ÙØª (30000 Ø§Ù…ØªÛŒØ§Ø²)</button></div>
    <p id="shopMsg"></p>
  </div>
</div>

<!-- Ø³Ø±ÙˆØ±Ù‡Ø§ -->
<div class="panel">
  <button class="toggle-btn" onclick="toggleSection('servers')">Ø³Ø±ÙˆØ±Ù‡Ø§</button>
  <div id="servers" class="hidden">
    <button onclick="server1()">Ø³Ø±ÙˆØ± 1</button>
    <button onclick="server2()">Ø³Ø±ÙˆØ± 2</button>
    <button onclick="server3()">Ø³Ø±ÙˆØ± 3</button>
    <button onclick="server4()">Ø³Ø±ÙˆØ± 4</button>
    <div id="serverMsg"></div>
    <div id="passwordSection" class="hidden">
      <input type="text" id="serverPassword" placeholder="Ù¾Ø³ÙˆØ±Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
      <button onclick="checkPassword()">ØªØ§ÛŒÛŒØ¯</button>
      <button onclick="closePassword()">Ø¨Ø³ØªÙ†</button>
      <p id="passwordMsg"></p>
    </div>
  </div>
</div>

<script>
const DISCORD_CLIENT_ID = "1413174935593156718";
const REDIRECT_URI = "https://madsmart13.github.io/BM_pro/app.html";

function toggleSection(id) {
  const el = document.getElementById(id);
  el.classList.toggle('hidden');
}

// Ú¯Ø±ÙØªÙ† ØªÙˆÚ©Ù† Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
const fragment = new URLSearchParams(window.location.hash.slice(1));
const accessToken = fragment.get("access_token");
if (accessToken) {
  fetch("https://discord.com/api/users/@me", {
    headers: { Authorization: `Bearer ${accessToken}` }
  })
  .then(res => res.json())
  .then(user => {
    document.getElementById("username").textContent = user.username + "#" + user.discriminator;
    document.getElementById("userid").textContent = user.id;
    localStorage.setItem("discord_user", JSON.stringify(user));
  });
} else {
  const savedUser = localStorage.getItem("discord_user");
  if (savedUser) {
    const user = JSON.parse(savedUser);
    document.getElementById("username").textContent = user.username + "#" + user.discriminator;
    document.getElementById("userid").textContent = user.id;
  }
}

// Ø§Ù…ØªÛŒØ§Ø²
let points = parseInt(localStorage.getItem("bmpro_points")) || 0;
document.getElementById("points").textContent = points;

function completeTask(task) {
  if (!localStorage.getItem(`bmpro_task_${task}`)) {
    points += 10;
    localStorage.setItem("bmpro_points", points);
    localStorage.setItem(`bmpro_task_${task}`, true);
    document.getElementById("points").textContent = points;
    alert("ØªØ¨Ø±ÛŒÚ©! Û±Û° Ø§Ù…ØªÛŒØ§Ø² Ú¯Ø±ÙØªÛŒØ¯ ğŸ‰");
  } else {
    alert("Ø§ÛŒÙ† ØªØ³Ú© Ø±Ùˆ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯ÛŒØ¯!");
  }
}

// ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú†Ù†Ù„ Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯
function joinDiscordChannel() {
  window.open("https://discord.com/invite/kkdDtDcG", "_blank");
  completeTask('join');
}

// Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„
function showMobileInput() {
  document.getElementById("mobileInput").classList.remove("hidden");
}
function submitMobile() {
  const mobile = document.getElementById("mobile").value.trim();
  const msg = document.getElementById("mobileMsg");
  if (!/^09\d{9}$/.test(mobile)) {
    msg.textContent = "Ø´Ù…Ø§Ø±Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª!";
    return;
  }
  msg.textContent = "Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ†";
  if (!localStorage.getItem('bmpro_task_mobile')) {
    points += 10;
    localStorage.setItem("bmpro_points", points);
    localStorage.setItem('bmpro_task_mobile', true);
    document.getElementById("points").textContent = points;
  }
}

// ÙØ±ÙˆØ´Ú¯Ø§Ù‡
function buyItem(id, cost) {
  const msg = document.getElementById("shopMsg");
  if (points < cost) {
    msg.textContent = "Ø§Ù…ØªÛŒØ§Ø² Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª!";
    return;
  }
  points -= cost;
  localStorage.setItem("bmpro_points", points);
  document.getElementById("points").textContent = points;
  msg.textContent = "Ø¯Ø± Ø³Ø±ÙˆØ± Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯ Ù…Ø§ Ø¯Ø± Ø¨Ø®Ø´ Ø®Ø±ÛŒØ¯ Ù¾ÛŒØ§Ù… Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯";
}

// Ø³Ø±ÙˆØ±Ù‡Ø§
function server1() { document.getElementById("serverMsg").textContent = "ÙˆØ±ÙˆØ¯ Ø¯Ø³ØªÛŒ! Ø§ÛŒ Ù¾ÛŒ Ø³Ø±ÙˆØ±: wii1-rFFa.aternos.me:22481"; }
function server2() { document.getElementById("serverMsg").textContent = "Ø³Ø±ÙˆØ± Ø§ÙÙ„Ø§ÛŒÙ† Ø§Ø³Øª"; }
function server3() {
  const el = document.getElementById("serverMsg");
  el.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...";
  setTimeout(() => { el.textContent = "ÙˆØ±ÙˆØ¯ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ù…Ú©Ù† Ù†ÛŒØ³Øª"; }, 5000);
}
function server4() {
  const el = document.getElementById("serverMsg");
  el.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...";
  setTimeout(() => {
    el.textContent = "";
    document.getElementById("passwordSection").classList.remove("hidden");
  }, 4000);
}
function checkPassword() {
  const pass = document.getElementById("serverPassword").value;
  const msg = document.getElementById("passwordMsg");
  if (pass === "ijff[hihfhofh") {
    msg.textContent = "wii1-rFFa.aternos.me:22481";
  } else {
    msg.textContent = "Ù¾Ø³ÙˆØ±Ø¯ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª";
  }
}
function closePassword() {
  document.getElementById("passwordSection").classList.add("hidden");
}
</script>
</body>
</html>
